(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bank-vote-voteRes"],{"1f52":function(t,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,a("c5f6");var i={name:"pollRes",data:function(){return{pollInfo:"",pollDetail:"",ticketCount:0,quorum:0,waiver:0,opsNum:0,status:-1,opsList:[],passData:0}},onLoad:function(){var t=uni.getStorageSync("poll");this.pollInfo=JSON.parse(t),console.log("----------------------");var o={voteId:this.pollInfo.id};this.getVoteDetail(o)},methods:{getVoteDetail:function(t){var o=this;this.$api.getVoteDetail(t,function(t){if(t.data.rc==o.$util.RC.SUCCESS){o.pollDetail=o.$util.tryParseJson(t.data.c),console.log("------------"),console.log(o.pollDetail),o.ticketCount=o.pollDetail.ticketCount,o.opsList=o.pollDetail.ops,o.quorum=o.pollDetail.vote.quorum;for(var a=0;a<o.pollDetail.ops.length;a++)"弃权"==o.pollDetail.ops[a].title&&(o.waiver+=o.pollDetail.ops[a].ballotCount),o.opsNum+=Number(o.pollDetail.ops[a].ballotCount);o.getStatus()}})},getStatus:function(){this.successData=[];var t=this.pollDetail.ops,o=0,a=0;o=33==this.pollInfo.effectiveRatio?1/3:50==this.pollInfo.effectiveRatio?.5:2/3,a=33==this.pollInfo.failureRatio?1/3:50==this.pollInfo.failureRatio?.5:2/3;var i=Math.ceil(this.quorum*o),n=Math.ceil(this.quorum*a);if(this.passData=i,this.waiver>=n)this.status=0;else{for(var e=0,l=0;l<t.length;l++)t[l].ballotCount>=i&&(e=1);if(1==e)for(var s=0;s<t.length;s++)t[s].ballotCount>=i&&this.ticketCount>=n&&(this.status=1,this.successData.push(t[s].title));else this.ticketCount==this.quorum?this.status=2:this.status=-1}},toBack:function(){uni.navigateBack()},toBackList:function(){uni.navigateBack({delta:2})}}};o.default=i},"1fec":function(t,o,a){"use strict";var i=a("6d47"),n=a.n(i);n.a},5104:function(t,o,a){"use strict";var i=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("v-uni-view",[a("v-uni-view",{staticClass:"header-box"},[a("v-uni-view",{staticClass:"title-box"},["1"==t.pollInfo.template?a("span",{staticClass:"poll-icon-color1 iconfont icon-paimingbiaoqian"}):t._e(),"0"==t.pollInfo.template?a("span",{staticClass:"poll-icon-color iconfont icon-user-list"}):t._e(),t._v(t._s(t.pollInfo.title))])],1),a("v-uni-view",{staticClass:"poll-info"},[a("v-uni-view",{staticClass:"info-status"},[a("v-uni-view",{staticClass:"info-xuantou"},["-1"==t.status?a("span",{staticStyle:{color:"#40c9c6"}},[t._v("投票未完成")]):t._e(),"0"==t.status?a("span",{staticStyle:{color:"#909399"}},[t._v("投票失效")]):t._e(),"1"==t.status?a("span",{staticStyle:{color:"#67C23A"}},[t._v("投票成功")]):t._e(),"2"==t.status?a("span",{staticStyle:{color:"#F56C6C"}},[t._v("投票失败")]):t._e()])],1),a("v-uni-view",{staticClass:"info-text"},[t._v("应到总人数："+t._s(t.quorum)+" 人，已参投有效人数："+t._s(t.ticketCount)+" 人，已投票数："+t._s(t.opsNum)+"票，其中弃权人数："+t._s(t.waiver)+" 人，未参投人数："+t._s(t.quorum-t.ticketCount)+" 人")])],1),t._l(t.opsList,function(o,i){return a("v-uni-view",{key:i},["1"==t.status&&o.ballotCount>=t.passData?a("v-uni-view",{staticClass:"poll-content-active "},[a("v-uni-view",{staticClass:"poll-content-text-active"},[t._v(t._s(o.title))]),a("v-uni-view",{staticClass:"poll-content-text-num-active"},[t._v(t._s(o.ballotCount))])],1):a("v-uni-view",{staticClass:"poll-content "},[a("v-uni-view",{staticClass:"poll-content-text"},[t._v(t._s(o.title))]),a("v-uni-view",{staticClass:"poll-content-text-num"},[t._v(t._s(o.ballotCount))])],1)],1)}),a("v-uni-view",{staticClass:"footer-box"},[a("v-uni-button",{attrs:{type:"default"},on:{click:function(o){o=t.$handleEvent(o),t.toBack()}}},[t._v("返回上一页")]),a("v-uni-button",{attrs:{type:"default"},on:{click:function(o){o=t.$handleEvent(o),t.toBackList()}}},[t._v("重新选择组织")])],1)],2)},n=[];a.d(o,"a",function(){return i}),a.d(o,"b",function(){return n})},6839:function(t,o,a){"use strict";a.r(o);var i=a("5104"),n=a("cada");for(var e in n)"default"!==e&&function(t){a.d(o,t,function(){return n[t]})}(e);a("1fec");var l=a("2877"),s=Object(l["a"])(n["default"],i["a"],i["b"],!1,null,"f2d0b0dc",null);o["default"]=s.exports},"6d47":function(t,o,a){var i=a("ac91");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("67972587",i,!0,{sourceMap:!1,shadowMode:!1})},ac91:function(t,o,a){o=t.exports=a("2350")(!1),o.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 集体经济uniapp 配色方案*/.poll-icon-color[data-v-f2d0b0dc]{color:#9788ff}.poll-icon-color1[data-v-f2d0b0dc]{color:#6cbaf8}.header-box[data-v-f2d0b0dc]{width:auto;padding:%?20?%;border-bottom:%?2?% solid #e8e8e8}.title-box[data-v-f2d0b0dc]{width:auto;line-height:%?50?%;color:#666;font-size:%?32?%}.title-box span[data-v-f2d0b0dc]{margin-right:%?15?%}\n/** poll 基础信息部分*/.info-status[data-v-f2d0b0dc]{padding:%?20?%;width:auto;height:%?60?%}.info-status .info-xuantou[data-v-f2d0b0dc]{float:left;line-height:%?60?%;font-size:%?28?%;color:#666}.info-status .info-status-text[data-v-f2d0b0dc]{float:right;line-height:%?60?%;font-size:%?28?%;color:#666}.info-text[data-v-f2d0b0dc]{margin:0 auto;width:90%;background:#fff7cc;padding:%?20?%;border-radius:%?15?%;font-size:%?28?%;line-height:%?40?%;color:#f56723}\n/** 选项列表*/.poll-content[data-v-f2d0b0dc]{width:auto;padding:%?40?%;border-bottom:1px solid #e8e8e8;overflow:hidden}.poll-content .poll-content-text[data-v-f2d0b0dc]{float:left;width:80%;line-height:%?50?%;color:#666;font-size:%?28?%}.poll-content .poll-content-text-num[data-v-f2d0b0dc]{float:left;width:20%;line-height:%?50?%;color:#666;font-size:%?28?%;color:#f44}.poll-content-active[data-v-f2d0b0dc]{width:auto;padding:%?40?%;border-bottom:1px solid #e8e8e8;overflow:hidden;background:#6cbaf8}.poll-content-active .poll-content-text-active[data-v-f2d0b0dc]{float:left;width:80%;line-height:%?50?%;color:#fff;font-size:%?28?%;background:#6cbaf8}.poll-content-active .poll-content-text-num-active[data-v-f2d0b0dc]{float:left;width:20%;line-height:%?50?%;font-size:%?28?%;color:#f44;background:#6cbaf8}\n/* 底部按钮*/.footer-box[data-v-f2d0b0dc]{width:auto;margin-top:%?40?%;padding:%?40?%}',""])},cada:function(t,o,a){"use strict";a.r(o);var i=a("1f52"),n=a.n(i);for(var e in i)"default"!==e&&function(t){a.d(o,t,function(){return i[t]})}(e);o["default"]=n.a}}]);